
model Categoria {
  id        Int     @id @default(autoincrement())
  nombre    String
  prefijo   String  @unique
  createdAt DateTime @default(now())
  plantillas PlantillaItem[]
}
model PlantillaItem {
  id          Int       @id @default(autoincrement())
  nombre      String
  fabricante  String
  modelo      String
  prefijo     String     // Ej: BRA
  categoriaId Int
  categoria   Categoria  @relation(fields: [categoriaId], references: [id])
  createdAt   DateTime   @default(now())
  imagenes    ImagenPlantillaItem[]
  instancias  Item[]
}
model Item {
  id           Int         @id @default(autoincrement())
  codigo       String      @unique     // KL-ET-BRA-1, etc.
  descripcion  String
  observacion  String
  ubicacion    String
  estado       String
  plantillaId  Int
  plantilla    PlantillaItem @relation(fields: [plantillaId], references: [id])
  createdAt    DateTime    @default(now())
  piezas       Pieza[]
  imagenes     ImagenItem[]
}
model Pieza {
  id         Int           @id @default(autoincrement())
  nombre     String
  cantidad   Int
  observacion String
  createdAt  DateTime      @default(now())
  itemId     Int
  item       Item          @relation(fields: [itemId], references: [id])
  imagenes   ImagenPieza[]
}
model ImagenPlantillaItem {
  id               Int     @id @default(autoincrement())
  url              String
  plantillaItemId  Int
  plantillaItem    PlantillaItem @relation(fields: [plantillaItemId], references: [id])
}
model ImagenItem {
  id      Int    @id @default(autoincrement())
  url     String
  itemId  Int
  item    Item   @relation(fields: [itemId], references: [id])
}
model ImagenPieza {
  id        Int    @id @default(autoincrement())
  url       String
  piezaId   Int
  pieza     Pieza  @relation(fields: [piezaId], references: [id])
}